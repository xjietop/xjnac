(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11081d86"],{"386d":function(t,e,a){"use strict";var i=a("cb7c"),r=a("83a1"),s=a("5f1b");a("214f")("search",1,function(t,e,a,n){return[function(a){var i=t(this),r=void 0==a?void 0:a[e];return void 0!==r?r.call(a,i):new RegExp(a)[e](String(i))},function(t){var e=n(a,t,this);if(e.done)return e.value;var o=i(t),c=String(this),l=o.lastIndex;r(l,0)||(o.lastIndex=0);var d=s(o,c);return r(o.lastIndex,l)||(o.lastIndex=l),null===d?-1:d.index}]})},"5a70":function(t,e,a){},"74a1":function(t,e,a){"use strict";var i=a("a4f1"),r=a.n(i);r.a},"74f0":function(t,e,a){var i={"./en-gb":"39a6","./zh-cn":"5c3a"};function r(t){var e=s(t);return a(e)}function s(t){var e=i[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}r.keys=function(){return Object.keys(i)},r.resolve=s,t.exports=r,r.id="74f0"},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},a4f1:function(t,e,a){},c56e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container app-order-list"},[a("search-bar",{ref:"refSearch",attrs:{"search-data":t.searchData,"auto-load":!0},on:{search:t.query}},[a("template",{slot:"left"},[a("div",{staticClass:"search-item dib"},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange",size:"small",placeholder:"选择时间",clearable:!1,"picker-options":t.pickerOptions},on:{change:t.search},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1)]),t._v(" "),a("template",{slot:"right"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.changeDateType},model:{value:t.searchParams.dateType,callback:function(e){t.$set(t.searchParams,"dateType",e)},expression:"searchParams.dateType"}},[a("el-radio-button",{attrs:{label:1}},[t._v("当日")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("本月")]),t._v(" "),a("el-radio-button",{attrs:{label:3}},[t._v("本年")])],1)],1)],2),t._v(" "),a("div",{staticClass:"app-table"},[a("div",{staticClass:"count-box"},[a("ul",[a("li",[a("i",{staticClass:"count-icon c-1"},[a("svg-icon",{attrs:{"icon-class":"product"}})],1),t._v(" "),a("div",{staticClass:"h2",domProps:{textContent:t._s(t.totalData.totalNum||0)}}),t._v(" "),a("p",[t._v("商品数量")])]),t._v(" "),a("li",[a("i",{staticClass:"count-icon c-3"},[a("svg-icon",{attrs:{"icon-class":"adjust-accounts"}})],1),t._v(" "),a("div",{staticClass:"h2",domProps:{textContent:t._s(t.totalData.totalPrice||0)}}),t._v(" "),a("p",[t._v("核算后金额(元)")])])])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData,height:t.height,stripe:""}},[a("el-table-column",{attrs:{prop:"productCode",label:"商品编号",width:"180",align:"center",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"commodityName",label:"商品名称","min-width":"150",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalAccountAmount",label:"核算后金额","min-width":"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"total",label:"商品数量","min-width":"150",align:"center"}}),t._v(" "),t.isProvinceOrArea?a("el-table-column",{attrs:{prop:"orderType",label:"操作","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.detail(e.row)}}},[t._v("查看详情")])]}}],null,!1,233814253)}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"app-pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","prev-text":"上一页","next-text":"下一页","page-sizes":[20,50,100,200],"current-page":t.searchData.page.current,"page-size":t.searchData.page.size,total:t.page.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),a("win-detail",{ref:"refDetail"})],1)},r=[],s=(a("386d"),a("db72")),n=a("b775"),o=a("700d");function c(t){return Object(n["a"])({baseURL:o["a"],url:"/bi/api/statistics/product",method:"GET",params:t})}var l=a("2f62"),d=a("b932"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"el-win-bi-product-volume-detail",attrs:{title:"商品详情销量表",visible:t.show,"close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e}}},[a("div",{staticClass:"app-table"},[a("search-bar",{ref:"refSearch",attrs:{"search-data":t.searchData,"auto-load":!1},on:{search:t.query}},[a("template",{slot:"left"},[a("div",{staticClass:"search-item dib"},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange",size:"small",placeholder:"选择时间",clearable:!1},on:{change:t.query},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1)]),t._v(" "),a("template",{slot:"right"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.changeDateType},model:{value:t.searchParams.dateType,callback:function(e){t.$set(t.searchParams,"dateType",e)},expression:"searchParams.dateType"}},[a("el-radio-button",{attrs:{label:1}},[t._v("当日")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("本月")]),t._v(" "),a("el-radio-button",{attrs:{label:3}},[t._v("本年")])],1)],1)],2),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData,height:400,stripe:""}},[a("el-table-column",{attrs:{prop:"userCode",label:"地总编号",width:"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"地总","min-width":"150",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalAccountAmount",label:"核算后金额(元)","min-width":"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"total",label:"商品数量","min-width":"150",align:"center"}})],1)],1),t._v(" "),a("div",{staticClass:"app-pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","prev-text":"上一页","next-text":"下一页","page-sizes":[20,50,100,200],"current-page":t.searchData.page.current,"page-size":t.searchData.page.size,total:t.page.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1)])},u=[],p=a("c1df"),m=a.n(p),f={name:"WinBiProductVolumeListDetail",components:{searchBar:d["a"]},data:function(){return{edit:!1,loading:!1,searchData:{quickList:[],searchList:[],page:{size:20,current:1}},searchParams:{searchType:20,dateType:1},dateTime:[m()(),m()()],show:!1,page:{total:0}}},watch:{},created:function(){},methods:{open:function(t,e){var a=this;this.edit=!0,this.loading=!1,this.callback=e,this.show=!0,this.dateTime=[m()(t.dateBegin),m()(t.dateEnd)],this.searchParams.dateType=t.dateType,this.searchParams.productSid=t.productSid,this.$nextTick(function(){a.$refs["refSearch"].search()})},query:function(t){var e=this;this.tableLoading=!0,this.tableData=[];var a=Object.assign({},this.searchParams);delete a.dateType,c(Object.assign({},t,a,{dateBegin:m()(this.dateTime[0]).format("YYYY-MM-DD"),dateEnd:m()(this.dateTime[1]).format("YYYY-MM-DD")})).then(function(t){var a=t.data.data;e.tableData=a.page&&a.page.records||[],e.page.total=a.page&&a.page.total||0,e.totalData={totalNum:a.totalNum,totalPrice:a.totalPrice},e.tableLoading=!1})},changeDateType:function(t){var e=this;1===t?this.dateTime=[m()(),m()()]:2===t?this.dateTime=[m()().startOf("month"),m()().endOf("month")]:3===t&&(this.dateTime=[m()().startOf("year"),m()().endOf("year")]),this.$nextTick(function(){e.$refs["refSearch"].search()})},sizeChange:function(t){this.$refs["refSearch"].search({size:t})},pageChange:function(t){this.$refs["refSearch"].search({current:t})},close:function(){this.show=!1}}},g=f,v=(a("ebcd"),a("2877")),b=Object(v["a"])(g,h,u,!1,null,null,null),T=b.exports,D={name:"PageBiProductVolumeList",components:{searchBar:d["a"],WinDetail:T},data:function(){return{ossURL:this.$store.getters.oss_url+"/",searchData:{quickList:[{label:"商品名称",value:"commodityName"}],searchList:[],page:{size:20,current:1}},searchParams:{searchType:10,dateType:2},dateTime:[m()().startOf("month"),m()().endOf("month")],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},tableData:[],totalData:{},tableLoading:!1,page:{total:0}}},computed:Object(s["a"])({},Object(l["b"])(["permissions"]),{height:function(){return this.$store.getters.winHeight-308},isProvinceOrArea:function(){return 1===this.$store.getters.userInfo.isProvince||1===this.$store.getters.userInfo.isRegion}}),methods:{query:function(t){var e=this;this.tableLoading=!0,c(Object.assign({},t,this.searchParams,{dateBegin:m()(this.dateTime[0]).format("YYYY-MM-DD"),dateEnd:m()(this.dateTime[1]).format("YYYY-MM-DD")})).then(function(t){var a=t.data.data;e.tableData=a.page&&a.page.records||[],e.page.total=a.page.total,e.totalData={totalNum:a.totalNum,totalPrice:a.totalPrice},e.tableLoading=!1})},changeDateType:function(t){var e=this;1===t?this.dateTime=[m()(),m()()]:2===t?this.dateTime=[m()().startOf("month"),m()().endOf("month")]:3===t&&(this.dateTime=[m()().startOf("year"),m()().endOf("year")]),this.$nextTick(function(){e.$refs["refSearch"].search()})},search:function(){this.$refs["refSearch"].search()},sizeChange:function(t){this.$refs["refSearch"].search({size:t})},pageChange:function(t){this.$refs["refSearch"].search({current:t})},detail:function(t){var e=Object.assign({},e,this.searchParams,{dateBegin:m()(this.dateTime[0]).format("YYYY-MM-DD"),dateEnd:m()(this.dateTime[1]).format("YYYY-MM-DD")});e.productSid=t.sid,this.$refs["refDetail"].open(e,function(t){})}}},_=D,w=(a("74a1"),Object(v["a"])(_,i,r,!1,null,"23796cfd",null));e["default"]=w.exports},ebcd:function(t,e,a){"use strict";var i=a("5a70"),r=a.n(i);r.a}}]);