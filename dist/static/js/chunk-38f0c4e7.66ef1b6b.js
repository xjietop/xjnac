(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38f0c4e7"],{"0d84":function(e,t,a){},"0e5e":function(e,t,a){"use strict";var r=a("2f7e"),o=a.n(r);o.a},"0fb4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container app-other-feedback"},[a("search-bar",{ref:"refSearch",attrs:{"search-data":e.searchData,"auto-load":!0},on:{search:e.query}},[a("template",{slot:"right"},[a("div",{staticClass:"app-search-right"},[a("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:e.create}},[e._v("添加")])],1)])],2),e._v(" "),a("div",{staticClass:"app-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,height:e.height,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"versionNumber",label:"版本号","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"versionCode",label:"版本名","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusName",label:"状态","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"downloadUrl",label:"下载地址","min-width":"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"forceUpdate",label:"是否强制更新","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(1===t.row.forceUpdate?"是":"否")+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"clientType",label:"客户端类型","min-width":"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述","min-width":"150",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.update(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"app-pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","prev-text":"上一页","next-text":"下一页","page-sizes":[20,50,100,200],"current-page":e.searchData.page.current,"page-size":e.searchData.page.size,total:e.page.total},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1),e._v(" "),a("win-version",{ref:"refVersion"})],1)},o=[],n=(a("386d"),a("db72")),i=a("b775"),s=a("700d");function l(e){return Object(i["a"])({baseURL:s["a"],url:"/cms/admin/version/page",method:"get",params:e})}function c(e){return Object(i["a"])({baseURL:s["a"],url:"/cms/admin/version",method:"post",data:e})}function d(e){return Object(i["a"])({baseURL:s["a"],url:"/cms/admin/version",method:"put",data:e})}var u=a("5880"),f=a("b932"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"el-win-version-add",attrs:{title:e.edit?"编 辑":"新 增",visible:e.show,"close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,size:"medium","label-width":"120px"}},[a("el-form-item",{attrs:{prop:"versionNumber",label:"版本号"}},[a("el-input",{attrs:{placeholder:"请输入版本号",type:"number"},model:{value:e.form.versionNumber,callback:function(t){e.$set(e.form,"versionNumber",t)},expression:"form.versionNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"versionCode",label:"版本名"}},[a("el-input",{attrs:{placeholder:"请输入版本号"},model:{value:e.form.versionCode,callback:function(t){e.$set(e.form,"versionCode",t)},expression:"form.versionCode"}})],1),e._v(" "),"Android"===e.form.clientType?a("el-form-item",{attrs:{prop:"downloadUrl",label:"上传文件"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.baseURL+"/public/api/file/upload",limit:1,headers:e.headers,"file-list":e.fileList,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"on-remove":e.handleRemove}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1):a("el-form-item",{attrs:{label:"下载地址",prop:"downloadUrl"}},[a("el-input",{attrs:{placeholder:"请输入下载地址"},model:{value:e.form.downloadUrl,callback:function(t){e.$set(e.form,"downloadUrl",t)},expression:"form.downloadUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"description",label:"描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"forceUpdate",label:"是否强制更新"}},[a("el-radio-group",{model:{value:e.form.forceUpdate,callback:function(t){e.$set(e.form,"forceUpdate",t)},expression:"form.forceUpdate"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"clientType",label:"客户端类型"}},[a("el-radio-group",{model:{value:e.form.clientType,callback:function(t){e.$set(e.form,"clientType",t)},expression:"form.clientType"}},[a("el-radio",{attrs:{label:"IOS"}},[e._v("IOS")]),e._v(" "),a("el-radio",{attrs:{label:"Android"}},[e._v("Android")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("确 定")])],1)],1)},m=[],h={name:"WinVersion",data:function(){return{edit:!1,loading:!1,baseURL:s["a"],headers:{Authorization:"Bearer "+this.$store.getters.access_token},ossURL:this.$store.getters.oss_url,form:{versionNumber:"",versionCode:"",downloadUrl:"",description:"",patchNumber:"",patchDownloadUrl:"",forceUpdate:0,clientType:"IOS"},rules:{versionNumber:[{required:!0,message:"请输入版本号",trigger:"blur"}],downloadUrl:[{required:!0,message:"请上传APP文件",trigger:"change"}]},fileList:[],show:!1}},watch:{},created:function(){},methods:{add:function(e){var t=this;this.edit=!1,this.loading=!1,this.callback=e,this.show=!0,this.fileList=[],this.$nextTick(function(){t.$refs["ruleForm"].resetFields()})},update:function(e,t){var a=this;this.edit=!0,this.loading=!1,this.callback=t,this.fileList=[],this.show=!0,this.$nextTick(function(){for(var t in a.$refs["ruleForm"].resetFields(),a.form)a.form[t]=e[t];a.fileList.push({url:e.downloadUrl,name:e.downloadUrl,status:"success"}),a.form.sid=e.sid})},save:function(){var e=this;this.$refs["ruleForm"].validate(function(t){if(!t)return!1;e.loading=!0;var a=Object.assign({},e.form);e.callback(a)})},close:function(){this.show=!1},handleSuccess:function(e){this.form.downloadUrl=this.ossURL+e.data[0]},handleRemove:function(e){this.form.downloadUrl=""}}},v=h,b=(a("0e5e"),a("2877")),g=Object(b["a"])(v,p,m,!1,null,null,null),w=g.exports,_={name:"PageSystemVersion",components:{searchBar:f["a"],WinVersion:w},data:function(){return{ossURL:this.$store.getters.oss_url+"/",searchData:{quickList:[{label:"按版本号",value:"versionNumber"}],searchList:[{prop:"clientType",placeholder:"客户端类型",type:"select",clearable:!0,list:[{label:"IOS",value:"IOS"},{label:"Android",value:"Android"}]}],page:{size:20,current:1}},tableData:[],page:{total:0},tableLoading:!1}},computed:Object(n["a"])({},Object(u["mapGetters"])(["permissions"]),{height:function(){return this.$store.getters.winHeight-205}}),methods:{query:function(e){var t=this;this.tableLoading=!0,l(Object.assign({},e)).then(function(e){t.tableData=e.data.data.records,t.page.total=e.data.data.total,t.tableLoading=!1})},sizeChange:function(e){this.$refs["refSearch"].search({size:e})},pageChange:function(e){this.$refs["refSearch"].search({current:e})},create:function(){var e=this;this.$refs["refVersion"].add(function(t){c(t).then(function(){e.$refs["refVersion"].loading=!1,e.$refs["refVersion"].close(),e.$refs["refSearch"].search(),e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})}).catch(function(){e.$refs["refVersion"].loading=!1})})},update:function(e){var t=this;this.$refs["refVersion"].update(e,function(e){d(e).then(function(){t.$refs["refSearch"].search(),t.$refs["refVersion"].loading=!1,t.$refs["refVersion"].close(),t.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})}).catch(function(){t.$refs["refVersion"].loading=!1})})}}},$=_,x=(a("37e9"),Object(b["a"])($,r,o,!1,null,"4980a22e",null));t["default"]=x.exports},"2f7e":function(e,t,a){},"37e9":function(e,t,a){"use strict";var r=a("0d84"),o=a.n(r);o.a},"386d":function(e,t,a){"use strict";var r=a("cb7c"),o=a("83a1"),n=a("5f1b");a("214f")("search",1,function(e,t,a,i){return[function(a){var r=e(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,r):new RegExp(a)[t](String(r))},function(e){var t=i(a,e,this);if(t.done)return t.value;var s=r(e),l=String(this),c=s.lastIndex;o(c,0)||(s.lastIndex=0);var d=n(s,l);return o(s.lastIndex,c)||(s.lastIndex=c),null===d?-1:d.index}]})},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}}}]);