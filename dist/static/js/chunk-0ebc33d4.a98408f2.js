(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ebc33d4"],{"0785":function(t,e,a){"use strict";var r=a("a080"),n=a.n(r);n.a},"0d62":function(t,e,a){"use strict";e["a"]={typeData:[{label:"非关键属性",value:1},{label:"关键属性",value:2},{label:"搜索属性",value:3}],viewTypeData:[{label:"文本框",value:1},{label:"下拉框",value:2},{label:"单选",value:3},{label:"多选",value:4},{label:"文本域",value:5}]}},"386d":function(t,e,a){"use strict";var r=a("cb7c"),n=a("83a1"),i=a("5f1b");a("214f")("search",1,function(t,e,a,s){return[function(a){var r=t(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,r):new RegExp(a)[e](String(r))},function(t){var e=s(a,t,this);if(e.done)return e.value;var l=r(t),o=String(this),c=l.lastIndex;n(c,0)||(l.lastIndex=0);var u=i(l,o);return n(l.lastIndex,c)||(l.lastIndex=c),null===u?-1:u.index}]})},6825:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container app-product-tag"},[a("search-bar",{ref:"refSearch",attrs:{"search-data":t.searchData,"auto-load":!0},on:{search:t.query}},[a("template",{slot:"right"},[a("div",{staticClass:"app-search-right"},[a("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"primary"},on:{click:t.create}},[t._v("新增标签")])],1)])],2),t._v(" "),a("div",{staticClass:"app-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.tableData,height:t.height,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"labelVal",label:"标签名称","min-width":"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"标签图标","min-width":"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{attrs:{src:t.ossURL+e.row.iconUrl,fit:"contain"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"showIndex",label:"显示顺序","min-width":"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"280",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.update(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.remove(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"app-pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","prev-text":"上一页","next-text":"下一页","page-sizes":[20,50,100,200],"current-page":t.searchData.page.current,"page-size":t.searchData.page.size,total:t.page.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),a("win-attribute",{ref:"refAttribute"})],1)},n=[],i=(a("386d"),a("db72")),s=a("b775"),l=a("700d");function o(t){return Object(s["a"])({baseURL:l["a"],url:"/product/admin/product/label/page",method:"get",params:t})}function c(t){return Object(s["a"])({baseURL:l["a"],url:"/product/admin/product/label",method:"post",data:t})}function u(t){return Object(s["a"])({baseURL:l["a"],url:"/product/admin/product/label/".concat(t.sid),method:"delete"})}function d(t){return Object(s["a"])({baseURL:l["a"],url:"/product/admin/product/label",method:"put",data:t})}var f=a("2f62"),p=a("b932"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"el-win-product-tag",attrs:{title:t.edit?"编 辑":"新 增",visible:t.show,"close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,size:"medium","label-width":"80px"}},[a("el-form-item",{attrs:{prop:"labelVal",label:"标签名称"}},[a("el-input",{attrs:{placeholder:"请输入标签名称"},model:{value:t.form.labelVal,callback:function(e){t.$set(t.form,"labelVal",e)},expression:"form.labelVal"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"iconUrl",label:"标签图片"}},[a("image-upload",{attrs:{multiple:!1},scopedSlots:t._u([{key:"tips",fn:function(){return[a("p",{staticClass:"tips-word"},[t._v("点击上传")])]},proxy:!0}]),model:{value:t.form.iconUrl,callback:function(e){t.$set(t.form,"iconUrl",e)},expression:"form.iconUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"showIndex",label:"显示顺序"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,"step-strictly":!0},model:{value:t.form.showIndex,callback:function(e){t.$set(t.form,"showIndex",e)},expression:"form.showIndex"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.save}},[t._v("确 定")])],1)],1)},b=[],m=a("4a9d"),g={name:"WinProductTag",components:{imageUpload:m["a"]},data:function(){return{edit:!1,loading:!1,form:{labelVal:"",iconUrl:"",showIndex:""},rules:{labelVal:[{required:!0,message:"请输入标签名称",trigger:"blur"}],iconUrl:[{required:!0,message:"请上传电脑端图片",trigger:"change"}],showIndex:[{required:!0,message:"请输入排序",trigger:"blur"}]},show:!1}},watch:{},created:function(){},methods:{add:function(t){var e=this;this.edit=!1,this.loading=!1,this.callback=t,this.show=!0,this.$nextTick(function(){e.$refs["ruleForm"].resetFields(),delete e.form.sid})},update:function(t,e){var a=this;this.edit=!0,this.loading=!1,this.callback=e,this.show=!0,this.$nextTick(function(){for(var e in a.$refs["ruleForm"].resetFields(),a.form)a.form[e]=t[e];a.form.sid=t.sid})},save:function(){var t=this;this.$refs["ruleForm"].validate(function(e){if(!e)return!1;t.loading=!0;var a=Object.assign({},t.form);t.callback(a)})},close:function(){this.show=!1}}},v=g,w=(a("0785"),a("2877")),x=Object(w["a"])(v,h,b,!1,null,null,null),y=x.exports,$=a("0d62"),_={name:"PageProductTag",components:{searchBar:p["a"],WinAttribute:y},data:function(){return{ossURL:this.$store.getters.oss_url+"/",searchData:{quickList:[{label:"按标签名称",value:"labelVal"}],searchList:[],page:{size:20,current:1}},searchParams:{},tableData:[],page:{total:0},typeData:$["a"].typeData,viewTypeData:$["a"].viewTypeData}},computed:Object(i["a"])({},Object(f["b"])(["permissions"]),{height:function(){return this.$store.getters.winHeight-205}}),methods:{query:function(t){var e=this;this.listLoading=!0,o(Object.assign({},t,this.searchParams)).then(function(t){e.tableData=t.data.data.records,console.log(e.tableData),e.page.total=t.data.data.total,e.listLoading=!1})},sizeChange:function(t){this.$refs["refSearch"].search({size:t})},pageChange:function(t){this.$refs["refSearch"].search({current:t})},create:function(){var t=this;this.$refs["refAttribute"].add(function(e){c(e).then(function(){t.$refs["refAttribute"].loading=!1,t.$refs["refAttribute"].close(),t.query(),t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})}).catch(function(){t.$refs["refAttribute"].loading=!1})})},remove:function(t){var e=this;this.$confirm('是否确认删除名称为"'+t.attrName+'"的属性吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return u(t)}).then(function(){e.query(),e.$message({showClose:!0,message:"删除成功",type:"success"})}).catch(function(){})},update:function(t){var e=this;this.$refs["refAttribute"].update(t,function(t){d(t).then(function(){e.query(),e.$refs["refAttribute"].loading=!1,e.$refs["refAttribute"].close(),e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})}).catch(function(){e.$refs["refAttribute"].loading=!1})})}}},k=_,D=(a("a834"),Object(w["a"])(k,r,n,!1,null,null,null));e["default"]=D.exports},"700b":function(t,e,a){},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},a080:function(t,e,a){},a834:function(t,e,a){"use strict";var r=a("700b"),n=a.n(r);n.a}}]);