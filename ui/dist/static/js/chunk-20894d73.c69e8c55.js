(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20894d73"],{"2a21":function(t,e,a){"use strict";var i=a("2cfb"),s=a.n(i);s.a},"2cfb":function(t,e,a){},"386d":function(t,e,a){"use strict";var i=a("cb7c"),s=a("83a1"),n=a("5f1b");a("214f")("search",1,function(t,e,a,r){return[function(a){var i=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,i):new RegExp(a)[e](String(i))},function(t){var e=r(a,t,this);if(e.done)return e.value;var l=i(t),o=String(this),c=l.lastIndex;s(c,0)||(l.lastIndex=0);var u=n(l,o);return s(l.lastIndex,c)||(l.lastIndex=c),null===u?-1:u.index}]})},"49f5":function(t,e,a){},"74f0":function(t,e,a){var i={"./en-gb":"39a6","./zh-cn":"5c3a"};function s(t){var e=n(t);return a(e)}function n(t){var e=i[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}s.keys=function(){return Object.keys(i)},s.resolve=n,t.exports=s,s.id="74f0"},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"95ad":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container app-order-list"},[a("search-bar",{ref:"refSearch",attrs:{"search-data":t.searchData,"auto-load":!0},on:{search:t.query}},[a("template",{slot:"left"},[a("div",{staticClass:"search-item dib"},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange",size:"small",placeholder:"选择时间",clearable:!1,"picker-options":t.pickerOptions},on:{change:t.search},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1)]),t._v(" "),a("template",{slot:"right"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.changeDateType},model:{value:t.searchParams.dateType,callback:function(e){t.$set(t.searchParams,"dateType",e)},expression:"searchParams.dateType"}},[a("el-radio-button",{attrs:{label:1}},[t._v("当日")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("本月")]),t._v(" "),a("el-radio-button",{attrs:{label:3}},[t._v("本年")])],1)],1)],2),t._v(" "),a("div",{staticClass:"app-table"},[a("div",{staticClass:"count-box"},[a("ul",[a("li",[a("i",{staticClass:"count-icon c-1"},[a("svg-icon",{attrs:{"icon-class":"product"}})],1),t._v(" "),a("div",{staticClass:"h2",domProps:{textContent:t._s(t.totalData.orderNumber||0)}}),t._v(" "),a("p",[t._v("订单笔数")])]),t._v(" "),a("li",[a("i",{staticClass:"count-icon c-2"},[a("svg-icon",{attrs:{"icon-class":"sales-volume"}})],1),t._v(" "),a("div",{staticClass:"h2",domProps:{textContent:t._s(t.totalData.salesNumber||0)}}),t._v(" "),a("p",[t._v("销量(元)")])]),t._v(" "),a("li",[a("i",{staticClass:"count-icon c-2"},[a("svg-icon",{attrs:{"icon-class":"sales-volume"}})],1),t._v(" "),a("div",{staticClass:"h2",domProps:{textContent:t._s(t.totalData.accountsAmountNumber||0)}}),t._v(" "),a("p",[t._v("核算销量(元)")])]),t._v(" "),a("li",[a("i",{staticClass:"count-icon c-3"},[a("svg-icon",{attrs:{"icon-class":"adjust-accounts"}})],1),t._v(" "),a("div",{staticClass:"h2",domProps:{textContent:t._s(t.totalData.productNumber||0)}}),t._v(" "),a("p",[t._v("商品数量")])])])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData,height:t.height,stripe:""}},[a("el-table-column",{attrs:{prop:"userCode",label:"客户编号","min-width":"150",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"客户名称",width:"250",align:"left","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"salesNumber",label:"销量(元)","min-width":"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"accountsAmount",label:"核算销量(元)","min-width":"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderNumber",label:"订单笔数","min-width":"60",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productNumber",label:"商品数量","min-width":"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"客户地址","min-width":"150",align:"center","show-overflow-tooltip":""}}),t._v(" "),t.isProvinceOrArea?a("el-table-column",{attrs:{prop:"userName",label:"团队成员","min-width":"100",align:"center"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.viewDetail(e.row)}}},[t._v("查看详情")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"app-pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","prev-text":"上一页","next-text":"下一页","page-sizes":[20,50,100,200],"current-page":t.searchData.page.current,"page-size":t.searchData.page.size,total:t.page.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),a("win-detail",{ref:"refDetail"})],1)},s=[],n=(a("386d"),a("db72")),r=a("b775"),l=a("700d");function o(t){return Object(r["a"])({baseURL:l["a"],url:"/bi/api/statistics/member/sale/page",method:"post",data:t})}function c(t){return Object(r["a"])({baseURL:l["a"],url:"/bi/customer/customerQuick",method:"get",params:t})}function u(t){return Object(r["a"])({baseURL:l["a"],url:"/bi/customer/info/".concat(t.userSid),method:"get",params:t})}var d=a("2f62"),h=a("b932"),v=a("c1df"),p=a.n(v),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"el-win-bi-customer-statistics-detail",attrs:{title:"客户详情",visible:t.show,"close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e}}},[a("div",{staticClass:"info-box clearfix"},[a("ul",[a("li",[a("span",[t._v("客户编码：")]),t._v(t._s(t.detail.userCode||"暂无"))]),t._v(" "),a("li",[a("span",[t._v("客户名称：")]),t._v(t._s(t.detail.name||"暂无"))]),t._v(" "),a("li",[a("span",[t._v("客户电话：")]),t._v(t._s(t.detail.mobilePhone||"暂无"))]),t._v(" "),a("li",[a("span",[t._v("客户地址：")]),t._v(t._s(t.detail.address||"暂无"))]),t._v(" "),a("li",[a("span",[t._v("注册时间：")]),t._v(t._s(t.detail.regTime||"暂无"))]),t._v(" "),a("li",[a("span",[t._v("法人：")]),t._v(t._s(t.detail.legalPerson||"暂无"))]),t._v(" "),a("li",[a("span",[t._v("上次下单时间：")]),t._v(t._s(t.detail.lastTime||"暂无"))]),t._v(" "),a("li",[a("span",[t._v("区域编码：")]),t._v(t._s(t.detail.areaCode||"暂无"))]),t._v(" "),a("li",[a("span",[t._v("所属俱乐部：")]),t._v(t._s(t.detail.club||"暂无"))])])]),t._v(" "),a("el-divider"),t._v(" "),a("div",{staticClass:"app-table clearfix"},[a("div",{staticClass:"search-bar"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.changeQuickType},model:{value:t.searchParams.quickType,callback:function(e){t.$set(t.searchParams,"quickType",e)},expression:"searchParams.quickType"}},[a("el-radio-button",{attrs:{label:1}},[t._v("近期已采")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("近期未采")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData,height:400,stripe:""}},[a("el-table-column",{attrs:{prop:"productCode",label:"商品编码",width:"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"商品名称",width:"250",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"brand",label:"品牌","min-width":"100",align:"center","show-overflow-tooltip":""}}),t._v(" "),1===t.searchParams.quickType?a("el-table-column",{attrs:{prop:"sellNumber",label:"销售数量","min-width":"100",align:"center"}}):t._e(),t._v(" "),2===t.searchParams.quickType?a("el-table-column",{attrs:{prop:"manufacturer",label:"生产厂家","min-width":"100",align:"center"}}):t._e()],1)],1)],1)},b=[],f={name:"WinBiCustomerStatisticsDetail",data:function(){return{loading:!1,show:!1,searchParams:{quickType:1},detail:{},allData:{},tableData:[],tableLoading:!1}},computed:{isProvinceOrArea:function(){return 1===this.$store.getters.userInfo.isProvince||1===this.$store.getters.userInfo.isRegion}},methods:{open:function(t,e){var a=this;this.loading=!1,this.callback=e,this.show=!0,this.searchParams.userSid=t.userSid,this.$nextTick(function(){a.queryMemeberDetail(t),a.queryCustomerQuick()})},queryMemeberDetail:function(t){var e=this;u({userSid:t.userSid}).then(function(t){var a=t.data.data;e.detail=a||{}})},queryCustomerQuick:function(){var t=this;this.tableLoading=!0,c(this.searchParams).then(function(e){var a=e.data.data;t.allData=a||[],t.tableData=t.allData.alreadyBuy||[],t.tableLoading=!1})},changeQuickType:function(t){this.tableData=1===t?this.allData.alreadyBuy||[]:this.allData.notYetBuy||[]},close:function(){this.show=!1}}},g=f,_=(a("f2ba"),a("2877")),w=Object(_["a"])(g,m,b,!1,null,null,null),D=w.exports,k={name:"PageBiCustomerStatistics",components:{searchBar:h["a"],WinDetail:D},data:function(){return{ossURL:this.$store.getters.oss_url+"/",searchData:{quickList:[{label:"客户名称",value:"businessName"},{label:"客户地址",value:"address"},{label:"团队成员",value:"userName"}],searchList:[],page:{size:20,current:1}},searchParams:{dateType:2},dateTime:[p()().startOf("month"),p()().endOf("month")],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},tableData:[],totalData:{},tableLoading:!1,page:{total:0}}},computed:Object(n["a"])({},Object(d["b"])(["permissions"]),{height:function(){return this.$store.getters.winHeight-315},isProvinceOrArea:function(){return 1===this.$store.getters.userInfo.isProvince||1===this.$store.getters.userInfo.isRegion}}),mounted:function(){this.isProvinceOrArea||this.searchData.quickList.splice(2,1)},methods:{query:function(t){var e=this;this.tableLoading=!0,o(Object.assign({},t,this.searchParams,{startTime:p()(this.dateTime[0]).format("YYYY-MM-DD"),endTime:p()(this.dateTime[1]).format("YYYY-MM-DD")})).then(function(t){var a=t.data.data;e.tableData=a.page.records||[],e.totalData=a.total||{},e.page.total=a.page.total,e.tableLoading=!1})},changeDateType:function(t){var e=this;1===t?this.dateTime=[p()(),p()()]:2===t?this.dateTime=[p()().startOf("month"),p()().endOf("month")]:3===t&&(this.dateTime=[p()().startOf("year"),p()().endOf("year")]),this.$nextTick(function(){e.$refs["refSearch"].search()})},viewDetail:function(t){this.$refs["refDetail"].open(t,function(t){console.log(t)})},search:function(){this.$refs["refSearch"].search()},sizeChange:function(t){this.$refs["refSearch"].search({size:t})},pageChange:function(t){this.$refs["refSearch"].search({current:t})}}},C=k,T=(a("2a21"),Object(_["a"])(C,i,s,!1,null,"581b75d5",null));e["default"]=T.exports},f2ba:function(t,e,a){"use strict";var i=a("49f5"),s=a.n(i);s.a}}]);