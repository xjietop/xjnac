(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{1288:function(e,a,t){},"8ed5":function(e,a,t){"use strict";var l=t("d0ed"),s=t.n(l);s.a},b932:function(e,a,t){"use strict";var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-search-bar clearfix"},[t("div",{staticClass:"app-search-left dib-wrap"},[e.searchData.quickList.length>0?t("div",{staticClass:"search-item dib"},[t("el-input",{attrs:{size:"small",placeholder:"请输入关键字",clearable:""},on:{clear:e.search},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.search(a)}},model:{value:e.searchQuick.searchValue,callback:function(a){e.$set(e.searchQuick,"searchValue",a)},expression:"searchQuick.searchValue"}},[t("el-select",{attrs:{slot:"prepend",size:"small"},slot:"prepend",model:{value:e.searchQuick.searchType,callback:function(a){e.$set(e.searchQuick,"searchType",a)},expression:"searchQuick.searchType"}},e._l(e.searchData.quickList,function(a,l){return t("el-option",e._b({key:l},"el-option",a,!1))}),1)],1)],1):e._e(),e._v(" "),e._l(e.searchData.searchList,function(a,l){return t("div",{key:l,staticClass:"search-item dib"},["select"===a.type?[t("el-select",{attrs:{clearable:a.clearable,placeholder:a.placeholder,disabled:a.disabled,size:"small"},on:{change:function(a){return e.search()}},model:{value:e.searchParams[a.prop],callback:function(t){e.$set(e.searchParams,a.prop,t)},expression:"searchParams[searchItem.prop]"}},e._l(a.list,function(a){return t("el-option",e._b({key:a.value},"el-option",a,!1))}),1)]:e._e()],2)}),e._v(" "),e._t("left"),e._v(" "),t("div",{staticClass:"search-item dib"},[t("el-button",{attrs:{size:"small",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),t("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),e._t("leftBtn")],2)],2),e._v(" "),t("div",{staticClass:"app-search-right dib-wrap"},[e._t("right")],2)])},s=[],r=(t("ac6a"),t("386d"),{name:"SearchBar",props:{searchData:{type:Object,default:function(){return{quickList:[],searchList:[],page:{size:20,current:1}}}},autoLoad:{type:Boolean,default:!0}},data:function(){return{searchQuick:{searchType:"",searchValue:""},searchParams:{size:20,current:1}}},watch:{searchData:{deep:!0,handler:function(e,a){this.initParams()}}},created:function(){var e=this;this.initParams(function(){e.search()})},methods:{initParams:function(e){var a=this;this.searchData.searchList.forEach(function(e){a.$set(a.searchParams,e.prop,e.defaultValue||"")}),this.searchData.quickList.length>0&&(this.searchQuick.searchType=this.searchData.quickList[0].value),this.searchParams.size=this.searchData.page.size,this.searchParams.current=this.searchData.page.current,e&&this.autoLoad&&e()},getParams:function(){var e=Object.assign({},this.searchParams);return this.searchData.quickList.length>0&&(e[this.searchQuick.searchType]=this.searchQuick.searchValue),e},search:function(e){this.searchParams.current=1;var a=this.getParams();e&&(a=Object.assign({},a,e||{})),this.$emit("search",a)},reset:function(){this.searchQuick.searchValue="",this.$emit("reset"),this.initParams(),this.search()},resetSearch:function(){this.searchQuick.searchValue="",this.$emit("reset"),this.initParams()}}}),i=r,c=t("2877"),n=Object(c["a"])(i,l,s,!1,null,null,null);a["a"]=n.exports},d0ed:function(e,a,t){},e4e4:function(e,a,t){"use strict";var l=t("1288"),s=t.n(l);s.a},ef09:function(e,a,t){"use strict";var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{staticClass:"el-win-select-product",attrs:{title:"选择商品",visible:e.show,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(a){e.show=a}}},[t("div",{staticClass:"app-table"},[t("search-bar",{ref:"refSearch",staticClass:"search-bar",attrs:{"search-data":e.searchData,"auto-load":!1},on:{search:e.query}},[t("template",{slot:"left"},[t("div",{staticClass:"search-item dib"},[t("el-select",{attrs:{placeholder:"是否抱团",size:"small",disabled:e.huddleDisabled},on:{change:e.changeHuddle},model:{value:e.searchParams.huddle,callback:function(a){e.$set(e.searchParams,"huddle",a)},expression:"searchParams.huddle"}},e._l(e.huddleData,function(a){return t("el-option",e._b({key:a.value},"el-option",a,!1))}),1)],1),e._v(" "),t("div",{staticClass:"search-item dib"},[t("el-select",{attrs:{placeholder:"俱乐部",size:"small",clearable:"",disabled:e.clubDisabled},on:{change:e.changeClub},model:{value:e.searchParams.club,callback:function(a){e.$set(e.searchParams,"club",a)},expression:"searchParams.club"}},e._l(e.clubData,function(a){return t("el-option",e._b({key:a.value},"el-option",a,!1))}),1)],1),e._v(" "),t("div",{staticClass:"search-item dib"},[t("el-tree-select",{ref:"refTreeSelect",attrs:{clearable:!0,data:e.treeData,props:e.defaultProps,size:"small",accordion:!0},on:{change:e.changeClass},model:{value:e.classId,callback:function(a){e.classId=a},expression:"classId"}})],1)]),e._v(" "),e.multiple?t("template",{slot:"right"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.batchAdd}},[e._v("批量添加")])],1):e._e()],2),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.multiple,expression:"multiple"}]},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",attrs:{data:e.tableData,height:450},on:{"select-all":e.handleSelect,select:e.handleSelect}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),t("el-table-column",{attrs:{prop:"productCode",label:"商品编号","min-width":"120",align:"left","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"commodityName",label:"商品名称","min-width":"150",align:"left","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"remark",label:"商品品种","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                        "+e._s(1===a.row.huddle?"抱团":"尚划算")+"\n                    ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"club",label:"所属俱乐部","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._l(a.row.businessAttrList,function(a){return[0!==a.club?t("span",{key:a.club,staticClass:"club-tag"},[e._v(e._s(1===a.club?"乐赛仙":2===a.club?"佐安堂":"初心"))]):e._e()]})]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"spec",label:"商品规格","min-width":"150",align:"left"}}),e._v(" "),t("el-table-column",{attrs:{prop:"manufacturer",label:"生产厂家","min-width":"120",align:"left","show-overflow-tooltip":""}})],1)],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.multiple,expression:"!multiple"}]},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",attrs:{data:e.tableData,height:450},on:{"select-all":e.handleSelect,select:e.handleSelect}},[t("el-table-column",{attrs:{prop:"productCode",label:"商品编号","min-width":"120",align:"left","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"commodityName",label:"商品名称","min-width":"150",align:"left","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"remark",label:"商品品种","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                        "+e._s(1===a.row.huddle?"抱团":"尚划算")+"\n                    ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"club",label:"所属俱乐部","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[1===a.row.huddle?e._l(a.row.businessAttrList,function(a){return t("span",{key:a.club,staticClass:"club-tag"},[e._v(e._s(1===a.club?"乐赛仙":2===a.club?"佐安堂":"初心"))])}):[e._v("\n                            -\n                        ")]]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"spec",label:"商品规格","min-width":"150",align:"left"}}),e._v(" "),t("el-table-column",{attrs:{prop:"manufacturer",label:"生产厂家","min-width":"120",align:"left","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.choseItem(a.row)}}},[e._v("添加")])]}}])})],1)],1),e._v(" "),t("div",{staticClass:"app-pagination"},[t("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",small:"","current-page":e.searchData.page.current,"page-size":e.searchData.page.size,"page-sizes":[50,100,200,500],total:e.page.total},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)],1)])},s=[],r=(t("ac6a"),t("386d"),t("feb7")),i=t("2934"),c=t("b932"),n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-select",{ref:"refSelect",attrs:{value:e.valueTitle,clearable:e.clearable,size:e.size},on:{clear:e.clearHandle}},[t("el-option",{staticClass:"options",attrs:{value:e.valueTitle,label:e.valueTitle}},[t("el-tree",{ref:"selectTree",attrs:{id:"tree-option","filter-node-method":e.filterNode,accordion:e.accordion,data:e.data,props:e.props,"node-key":e.props.value,"default-expanded-keys":e.defaultExpandedKey},on:{"node-click":e.handleNodeClick}})],1)],1)},o=[],u=(t("c5f6"),{name:"ElTreeSelect",props:{props:{type:Object,default:function(){return{value:"id",label:"title",children:"children"}}},size:{type:String,default:"medium"},data:{type:Array,default:function(){return[]}},value:{type:[Number,String],default:null},clearable:{type:Boolean,default:!0},accordion:{type:Boolean,default:!1}},data:function(){return{valueId:null,valueTitle:"",defaultExpandedKey:[]}},watch:{value:function(){this.valueId=this.value,this.initHandle()}},mounted:function(){this.initHandle()},methods:{initHandle:function(){this.valueId&&(this.valueTitle=this.$refs.selectTree.getNode(this.valueId).data[this.props.label],this.$refs.selectTree.setCurrentKey(this.valueId),this.defaultExpandedKey=[this.valueId]),this.initScroll()},initScroll:function(){this.$nextTick(function(){var e=document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],a=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");e.style.cssText="margin: 0px; max-height: none; overflow: hidden;",a.forEach(function(e){e.style.width=0})})},handleNodeClick:function(e){this.valueTitle=e[this.props.label],this.valueId=e[this.props.value],this.$emit("change",this.valueId,e),this.defaultExpandedKey=[]},clearHandle:function(){this.valueTitle="",this.valueId=null,this.defaultExpandedKey=[],this.clearSelected(),this.$emit("change",null)},clearSelected:function(){var e=document.querySelectorAll("#tree-option .el-tree-node");e.forEach(function(e){return e.classList.remove("is-current")})},blur:function(){this.$refs["refSelect"].blur()}}}),h=u,d=(t("8ed5"),t("2877")),p=Object(d["a"])(h,n,o,!1,null,"341f77a3",null),f=p.exports,b={name:"WinProductListAddRelation",components:{searchBar:c["a"],elTreeSelect:f},props:{multiple:{type:Object,default:function(){return!1}},huddleDisabled:{type:Boolean,default:function(){return!1}},clubDisabled:{type:Boolean,default:function(){return!1}}},data:function(){return{edit:!1,loading:!1,searchData:{quickList:[{label:"按商品编号",value:"productCode"},{label:"按商品名称",value:"commodityName"},{label:"按生产厂家",value:"manufacture"}],searchList:[],page:{size:50,current:1}},searchParams:{isReady:1,status:2,huddle:1,club:1},defaultProps:{children:"childrenList",label:"className",value:"sid"},huddleData:[{label:"抱团",value:1},{label:"尚划算",value:0}],clubData:[{label:"乐赛仙",value:1},{label:"佐安堂",value:2},{label:"初心",value:3}],classId:"",tableData:[],tableLoading:!1,page:{total:0},selection:[],show:!1}},created:function(){},methods:{open:function(e,a){var t=this;if(this.edit=!0,this.loading=!1,this.callback=e,this.show=!0,a)for(var l in a)this.searchParams[l]=a[l];this.$nextTick(function(){t.fetchProductClass(),t.$refs["table"].doLayout(),t.$refs["refSearch"].search()})},choseItem:function(e){this.callback(e),this.show=!1},close:function(){this.show=!1},query:function(e){var a=this;this.tableLoading=!0,Object(r["a"])(Object.assign({},e,this.searchParams)).then(function(e){a.tableData=e.data.data.records||[],a.page.total=e.data.data.total,a.tableLoading=!1})},fetchProductClass:function(){var e=this;this.searchParams.secondClassSid="",this.searchParams.firstClassSid="",Object(i["a"])({parentSid:0,club:this.searchParams.club}).then(function(a){var t=a.data.data;t.records&&t.records.forEach(function(e){e.childrenList&&e.childrenList.forEach(function(e){delete e.childrenList})}),e.treeData=t.records||[]})},sizeChange:function(e){this.$refs["refSearch"].search({size:e})},pageChange:function(e){this.$refs["refSearch"].search({current:e})},handleSelect:function(e){this.selection=e},changeHuddle:function(e){var a=this;this.searchParams.club=1===e?1:"",this.$refs["refTreeSelect"].clearHandle(),this.$nextTick(function(){a.fetchProductClass(),a.$refs["refSearch"].search()})},changeClub:function(e){var a=this;this.$refs["refTreeSelect"].clearHandle(),this.$nextTick(function(){a.fetchProductClass(),a.$refs["refSearch"].search()})},changeClass:function(e,a){a&&(0===a.parentSid?(this.searchParams.secondClassSid="",this.searchParams.firstClassSid=e):(this.searchParams.firstClassSid="",this.searchParams.secondClassSid=e)),this.$refs["refTreeSelect"].blur(),this.$refs["refSearch"].search()},batchAdd:function(){this.callback(this.selection),this.show=!1}}},m=b,v=(t("e4e4"),Object(d["a"])(m,l,s,!1,null,null,null));a["a"]=v.exports}}]);