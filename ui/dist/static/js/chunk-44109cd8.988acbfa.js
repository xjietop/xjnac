(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44109cd8"],{"0c29":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"el-win-member-set-general",attrs:{title:"设置开票类型",visible:e.show,"close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,size:"medium","label-width":"0px"}},[a("el-form-item",{attrs:{prop:"billType"}},[a("el-radio-group",{model:{value:e.form.billType,callback:function(t){e.$set(e.form,"billType",t)},expression:"form.billType"}},[a("el-radio",{attrs:{label:0}},[e._v("普票")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("专票")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("确 定")])],1)],1)},s=[],l={name:"WinSetClub",components:{},data:function(){return{edit:!1,loading:!1,form:{billType:0},rules:{billType:[]},show:!1}},watch:{},created:function(){},methods:{update:function(e,t){var a=this;this.edit=!0,this.loading=!1,this.callback=t,this.show=!0,this.$nextTick(function(){a.$refs["ruleForm"].resetFields(),a.form.billType=e.isGeneral,a.form.sid=e.sid})},save:function(){var e=this;this.$refs["ruleForm"].validate(function(t){if(!t)return!1;e.loading=!0;var a=Object.assign({},e.form);e.callback(a)})},close:function(){this.show=!1}}},n=l,o=(a("f8fc"),a("2877")),i=Object(o["a"])(n,r,s,!1,null,null,null);t["a"]=i.exports},1288:function(e,t,a){},1900:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"el-win-member-list-relation",attrs:{title:"关联账户",visible:e.show,"close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,size:"medium","label-width":"100px"}},[a("el-form-item",{attrs:{prop:"userCode",label:"会员编号"}},[a("el-input",{attrs:{type:"text",disabled:"",placeholder:"请输入会员编号"},model:{value:e.form.userCode,callback:function(t){e.$set(e.form,"userCode",t)},expression:"form.userCode"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"name",label:"会员名称"}},[a("el-input",{attrs:{type:"text",disabled:"",placeholder:"请输入会员名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"phone",label:"会员电话"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入会员电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"===typeof t?t.trim():t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"email",label:"会员邮箱"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入会员邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"account",label:"会员区分码"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入会员区分码"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account","string"===typeof t?t.trim():t)},expression:"form.account"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"businessType",label:"会员类型"}},[a("el-radio",{attrs:{label:2},model:{value:e.form.businessType,callback:function(t){e.$set(e.form,"businessType",t)},expression:"form.businessType"}},[e._v("诊所")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.form.businessType,callback:function(t){e.$set(e.form,"businessType",t)},expression:"form.businessType"}},[e._v("药店")])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("确 定")])],1)],1)},s=[],l={name:"WinMemberListRelation",data:function(){return{edit:!1,loading:!1,form:{userCode:"",name:"",phone:"",email:"",account:"",businessType:1},rules:{phone:[{required:!0,message:"请输入会员电话",trigger:"blur"}],email:[],account:[],businessType:[{required:!0,message:"请选择会员类型",trigger:"change"}]},show:!1}},watch:{},created:function(){},methods:{update:function(e,t){var a=this;this.loading=!1,this.callback=t,this.show=!0,this.$nextTick(function(){for(var t in a.$refs["ruleForm"].resetFields(),a.form)a.form[t]=e[t]})},save:function(){var e=this;this.$refs["ruleForm"].validate(function(t){if(!t)return!1;e.loading=!0;var a=Object.assign({},e.form);e.callback(a)})},close:function(){this.show=!1}}},n=l,o=(a("faa9"),a("2877")),i=Object(o["a"])(n,r,s,!1,null,null,null);t["a"]=i.exports},"1c00":function(e,t,a){},"29b1":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"el-win-member-club",attrs:{title:"设置俱乐部",visible:e.show,"close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,size:"medium","label-width":"0px"}},[a("el-form-item",{attrs:{prop:"clubs"}},[a("el-checkbox-group",{model:{value:e.form.clubs,callback:function(t){e.$set(e.form,"clubs",t)},expression:"form.clubs"}},[a("el-checkbox",{attrs:{label:1,name:"clubs"}},[e._v("乐赛仙")]),e._v(" "),a("el-checkbox",{attrs:{label:2,name:"clubs"}},[e._v("佐安堂")]),e._v(" "),a("el-checkbox",{attrs:{label:3,name:"clubs"}},[e._v("初心")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("确 定")])],1)],1)},s=[],l={name:"WinSetClub",components:{},data:function(){return{edit:!1,loading:!1,form:{clubs:[]},rules:{clubs:[]},show:!1}},watch:{},created:function(){},methods:{update:function(e,t){var a=this;this.edit=!0,this.loading=!1,this.callback=t,this.show=!0,this.$nextTick(function(){a.$refs["ruleForm"].resetFields(),a.form.clubs=e.clubs,a.form.sid=e.sid})},save:function(){var e=this;this.$refs["ruleForm"].validate(function(t){if(!t)return!1;e.loading=!0;var a=Object.assign({},e.form);e.callback(a)})},close:function(){this.show=!1}}},n=l,o=(a("962b"),a("2877")),i=Object(o["a"])(n,r,s,!1,null,null,null);t["a"]=i.exports},"386d":function(e,t,a){"use strict";var r=a("cb7c"),s=a("83a1"),l=a("5f1b");a("214f")("search",1,function(e,t,a,n){return[function(a){var r=e(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,r):new RegExp(a)[t](String(r))},function(e){var t=n(a,e,this);if(t.done)return t.value;var o=r(e),i=String(this),c=o.lastIndex;s(c,0)||(o.lastIndex=0);var u=l(o,i);return s(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]})},"512e":function(e,t,a){"use strict";var r=a("1c00"),s=a.n(r);s.a},"692f":function(e,t,a){},"7bd7":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"el-win-member-list-password",attrs:{title:"重置密码",visible:e.show,"close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,size:"medium","label-width":"80px"}},[a("el-form-item",{attrs:{prop:"pwd",label:"新密码"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.form.pwd,callback:function(t){e.$set(e.form,"pwd",t)},expression:"form.pwd"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"repeatPassword",label:"确认密码"}},[a("el-input",{attrs:{type:"password",placeholder:"请重新输入新密码"},model:{value:e.form.repeatPassword,callback:function(t){e.$set(e.form,"repeatPassword",t)},expression:"form.repeatPassword"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v("确 定")])],1)],1)},s=[],l={IDcard:/^\d{6}(19|2\d)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)?$/,cell_phone:/^(1[3-9][0-9])\d{8}$|\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,mobile:/^((13|14|15|17|18)[0-9]{1}\d{8})$/,chinese:/^[\u0391-\uFFE5]+$/,date:/^\d{4}-\d{2}-\d{2}$/,digits:/^\d+$/,email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,letters:/^[a-z]+$/i,person_name:/^(?!\d+$)[\dA-Za-z\u2E80-\uFE4F]{1,20}$/,qq:/^[1-9]\d{4,}$/,tel:/^(?:(?:0\d{2,3}[\- ]?[1-9]\d{6,7})|(?:[48]00[\- ]?[1-9]\d{6}))$/,time:/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/,url:/^(https?|s?ftp):\/\/\S+$/i,zipcode:/^\d{6}$/,telPhone:/^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$|^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$|^0\d{2,3}-?\d{7,8}$/,longitude:/^[\-\+]?(((\d|[1-9]\d|1[0-7]\d|0)\.\d{0,10})|(\d|[1-9]\d|1[0-7]\d|0{1,3})|180\.0{0,10}|180)$/,latitude:/^[\-\+]?([0-8]?\d{1}\.\d{0,10}|90\.0{0,10}|[0-8]?\d{1}|90)$/,zmszhz:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,price:/^[0-9]+([.]{1}[0-9]{1,2})?$/,priceDecimal:/^[0-9]+([.]{1}[0-9]{1,4})?$/,money:/^\d+(\.\d{1,2})?$/,money2:/^[\-\+]?\d+(\.\d{1,2})?$/,money3:/^\d{1,10}(\.\d{1,2})?$/,discount:/^(\d|[1-9]\d|100)(\.\d{1,2})?$/,passWord:/^[a-zA-Z0-9\x21-\x7e]{6,20}$/},n={name:"WinPassword",data:function(){var e=this;return{edit:!1,loading:!1,form:{pwd:"",repeatPassword:""},rules:{pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:l.passWord,message:"6至20个字符，支持数字，大小写字母和标点符号组合",trigger:"blur"}],repeatPassword:[{required:!0,message:"请重新输入新密码",trigger:"blur"},{validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.form.pwd?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]},show:!1}},watch:{},created:function(){},methods:{update:function(e,t){var a=this;this.edit=!0,this.loading=!1,this.callback=t,this.show=!0,this.$nextTick(function(){for(var t in a.$refs["ruleForm"].resetFields(),a.form)a.form[t]=e[t];a.form.sid=e.sid})},save:function(){var e=this;this.$refs["ruleForm"].validate(function(t){if(!t)return!1;e.loading=!0;var a=Object.assign({},e.form);e.callback(a)})},close:function(){this.show=!1}}},o=n,i=(a("512e"),a("2877")),c=Object(i["a"])(o,r,s,!1,null,null,null);t["a"]=c.exports},8394:function(e,t,a){},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"8d2c":function(e,t,a){},"8ed5":function(e,t,a){"use strict";var r=a("d0ed"),s=a.n(r);s.a},"962b":function(e,t,a){"use strict";var r=a("ccb5"),s=a.n(r);s.a},b2ea:function(e,t,a){"use strict";var r=a("8394"),s=a.n(r);s.a},b932:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-search-bar clearfix"},[a("div",{staticClass:"app-search-left dib-wrap"},[e.searchData.quickList.length>0?a("div",{staticClass:"search-item dib"},[a("el-input",{attrs:{size:"small",placeholder:"请输入关键字",clearable:""},on:{clear:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchQuick.searchValue,callback:function(t){e.$set(e.searchQuick,"searchValue",t)},expression:"searchQuick.searchValue"}},[a("el-select",{attrs:{slot:"prepend",size:"small"},slot:"prepend",model:{value:e.searchQuick.searchType,callback:function(t){e.$set(e.searchQuick,"searchType",t)},expression:"searchQuick.searchType"}},e._l(e.searchData.quickList,function(t,r){return a("el-option",e._b({key:r},"el-option",t,!1))}),1)],1)],1):e._e(),e._v(" "),e._l(e.searchData.searchList,function(t,r){return a("div",{key:r,staticClass:"search-item dib"},["select"===t.type?[a("el-select",{attrs:{clearable:t.clearable,placeholder:t.placeholder,disabled:t.disabled,size:"small"},on:{change:function(t){return e.search()}},model:{value:e.searchParams[t.prop],callback:function(a){e.$set(e.searchParams,t.prop,a)},expression:"searchParams[searchItem.prop]"}},e._l(t.list,function(t){return a("el-option",e._b({key:t.value},"el-option",t,!1))}),1)]:e._e()],2)}),e._v(" "),e._t("left"),e._v(" "),a("div",{staticClass:"search-item dib"},[a("el-button",{attrs:{size:"small",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),e._t("leftBtn")],2)],2),e._v(" "),a("div",{staticClass:"app-search-right dib-wrap"},[e._t("right")],2)])},s=[],l=(a("ac6a"),a("386d"),{name:"SearchBar",props:{searchData:{type:Object,default:function(){return{quickList:[],searchList:[],page:{size:20,current:1}}}},autoLoad:{type:Boolean,default:!0}},data:function(){return{searchQuick:{searchType:"",searchValue:""},searchParams:{size:20,current:1}}},watch:{searchData:{deep:!0,handler:function(e,t){this.initParams()}}},created:function(){var e=this;this.initParams(function(){e.search()})},methods:{initParams:function(e){var t=this;this.searchData.searchList.forEach(function(e){t.$set(t.searchParams,e.prop,e.defaultValue||"")}),this.searchData.quickList.length>0&&(this.searchQuick.searchType=this.searchData.quickList[0].value),this.searchParams.size=this.searchData.page.size,this.searchParams.current=this.searchData.page.current,e&&this.autoLoad&&e()},getParams:function(){var e=Object.assign({},this.searchParams);return this.searchData.quickList.length>0&&(e[this.searchQuick.searchType]=this.searchQuick.searchValue),e},search:function(e){this.searchParams.current=1;var t=this.getParams();e&&(t=Object.assign({},t,e||{})),this.$emit("search",t)},reset:function(){this.searchQuick.searchValue="",this.$emit("reset"),this.initParams(),this.search()},resetSearch:function(){this.searchQuick.searchValue="",this.$emit("reset"),this.initParams()}}}),n=l,o=a("2877"),i=Object(o["a"])(n,r,s,!1,null,null,null);t["a"]=i.exports},ccb5:function(e,t,a){},d0ed:function(e,t,a){},d911:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"el-win-member-control-product",attrs:{title:"查看控销商品",visible:e.show,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"app-table"},[a("search-bar",{ref:"refSearch",staticClass:"search-bar",attrs:{"search-data":e.searchData,"auto-load":!1},on:{search:e.query}},[a("template",{slot:"leftBtn"},[a("el-button",{attrs:{size:"small"},on:{click:e.addProduct}},[e._v("增加商品")])],1),e._v(" "),a("template",{slot:"right"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.search},model:{value:e.searchParams.controlType,callback:function(t){e.$set(e.searchParams,"controlType",t)},expression:"searchParams.controlType"}},[a("el-radio-button",{attrs:{label:2,name:"controlType"}},[e._v("可销")]),e._v(" "),a("el-radio-button",{attrs:{label:0,name:"controlType"}},[e._v("不可销")]),e._v(" "),a("el-radio-button",{attrs:{label:1,name:"controlType"}},[e._v("只可销")])],1)],1)],2),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",attrs:{data:e.tableData,height:450},on:{select:e.handleSelect}},[a("el-table-column",{attrs:{prop:"erpProductCode",label:"商品ID","min-width":"250",align:"left",fixed:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["add"===t.row.type?[a("el-select",{ref:"refSearchTypeKeyword",staticClass:"search-type-keyword",attrs:{filterable:"",remote:"","reserve-keyword":"","value-key":"sid",placeholder:"请输入商品ID、助记码、商品名称搜索","remote-method":e.fetchProduct,loading:e.fetchProductLoading,size:"small","popper-append-to-body":""},on:{change:e.changeProduct},model:{value:e.currentProduct,callback:function(t){e.currentProduct=t},expression:"currentProduct"}},e._l(e.productData,function(t){return a("el-option",{key:t.sid,attrs:{label:t.commodityName,value:t}},[a("div",{staticClass:"select-porduct-prop-li"},[a("span",{staticClass:"fl",attrs:{title:t.commodityName}},[e._v(e._s(t.commodityName))]),e._v(" "),a("span",{staticClass:"fr",attrs:{title:t.spec}},[e._v(e._s(t.spec))])])])}),1)]:[e._v("\n                        "+e._s(t.row.erpProductCode)+"\n                    ")]]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"commodityName",label:"商品名称","min-width":"200",align:"left",fixed:"","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"manufacturer",label:"生产厂家","min-width":"120",align:"left","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["add"===t.row.type?[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.tableData.splice(t.$index,1)}}},[e._v("取消")])]:[2===e.searchParams.controlType?[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.updateProductStatus(t.row,0)}}},[e._v("不可销")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.updateProductStatus(t.row,1)}}},[e._v("只可销")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.removeProduct(t.row)}}},[e._v("移除")])]:0===e.searchParams.controlType?[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.updateProductStatus(t.row,2)}}},[e._v("可销")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.updateProductStatus(t.row,1)}}},[e._v("只可销")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.removeProduct(t.row)}}},[e._v("移除")])]:1===e.searchParams.controlType?[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.updateProductStatus(t.row,2)}}},[e._v("可销")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.updateProductStatus(t.row,0)}}},[e._v("不可销")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.removeProduct(t.row)}}},[e._v("移除")])]:e._e()]]}}])})],1),e._v(" "),a("div",{staticClass:"app-pagination"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",small:"","current-page":e.searchData.page.current,"page-size":e.searchData.page.size,total:e.page.total},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)],1),e._v(" "),a("select-product",{ref:"refProduct",attrs:{multiple:!0,"huddle-disabled":!0,"club-disabled":!0}})],1)},s=[],l=(a("386d"),a("ac6a"),a("da71")),n=a("b932"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"el-win-select-product",attrs:{title:"选择商品",visible:e.show,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"app-table"},[a("search-bar",{ref:"refSearch",staticClass:"search-bar",attrs:{"search-data":e.searchData,"auto-load":!1},on:{search:e.query}},[a("template",{slot:"left"},[a("div",{staticClass:"search-item dib"},[a("el-select",{attrs:{placeholder:"是否抱团",size:"small",disabled:e.huddleDisabled},on:{change:e.changeHuddle},model:{value:e.searchParams.huddle,callback:function(t){e.$set(e.searchParams,"huddle",t)},expression:"searchParams.huddle"}},e._l(e.huddleData,function(t){return a("el-option",e._b({key:t.value},"el-option",t,!1))}),1)],1),e._v(" "),a("div",{staticClass:"search-item dib"},[a("el-select",{attrs:{placeholder:"俱乐部",size:"small",clearable:"",disabled:e.clubDisabled},on:{change:e.changeClub},model:{value:e.searchParams.club,callback:function(t){e.$set(e.searchParams,"club",t)},expression:"searchParams.club"}},e._l(e.clubData,function(t){return a("el-option",e._b({key:t.value},"el-option",t,!1))}),1)],1),e._v(" "),a("div",{staticClass:"search-item dib"},[a("el-tree-select",{ref:"refTreeSelect",attrs:{clearable:!0,data:e.treeData,props:e.defaultProps,size:"small",accordion:!0},on:{change:e.changeClass},model:{value:e.classId,callback:function(t){e.classId=t},expression:"classId"}})],1)]),e._v(" "),e.multiple?a("template",{slot:"right"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.batchAdd}},[e._v("批量添加")])],1):e._e()],2),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.multiple,expression:"multiple"}]},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",attrs:{data:e.tableData,height:450},on:{"select-all":e.handleSelect,select:e.handleSelect}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productCode",label:"商品编号","min-width":"120",align:"left","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"commodityName",label:"商品名称","min-width":"150",align:"left","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"商品品种","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(1===t.row.huddle?"抱团":"尚划算")+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"club",label:"所属俱乐部","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.businessAttrList,function(t){return[0!==t.club?a("span",{key:t.club,staticClass:"club-tag"},[e._v(e._s(1===t.club?"乐赛仙":2===t.club?"佐安堂":"初心"))]):e._e()]})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"spec",label:"商品规格","min-width":"150",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"manufacturer",label:"生产厂家","min-width":"120",align:"left","show-overflow-tooltip":""}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.multiple,expression:"!multiple"}]},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",attrs:{data:e.tableData,height:450},on:{"select-all":e.handleSelect,select:e.handleSelect}},[a("el-table-column",{attrs:{prop:"productCode",label:"商品编号","min-width":"120",align:"left","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"commodityName",label:"商品名称","min-width":"150",align:"left","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"商品品种","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(1===t.row.huddle?"抱团":"尚划算")+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"club",label:"所属俱乐部","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.huddle?e._l(t.row.businessAttrList,function(t){return a("span",{key:t.club,staticClass:"club-tag"},[e._v(e._s(1===t.club?"乐赛仙":2===t.club?"佐安堂":"初心"))])}):[e._v("\n                            -\n                        ")]]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"spec",label:"商品规格","min-width":"150",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"manufacturer",label:"生产厂家","min-width":"120",align:"left","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.choseItem(t.row)}}},[e._v("添加")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"app-pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper",small:"","current-page":e.searchData.page.current,"page-size":e.searchData.page.size,"page-sizes":[50,100,200,500],total:e.page.total},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)],1)])},i=[],c=a("c24f"),u=a("b775"),d=a("700d");function h(e){return Object(u["a"])({baseURL:d["a"],url:"/product/admin/productClass/industryClass/all",method:"get",params:e})}var f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{ref:"refSelect",attrs:{value:e.valueTitle,clearable:e.clearable,size:e.size},on:{clear:e.clearHandle}},[a("el-option",{staticClass:"options",attrs:{value:e.valueTitle,label:e.valueTitle}},[a("el-tree",{ref:"selectTree",attrs:{id:"tree-option","filter-node-method":e.filterNode,accordion:e.accordion,data:e.data,props:e.props,"node-key":e.props.value,"default-expanded-keys":e.defaultExpandedKey},on:{"node-click":e.handleNodeClick}})],1)],1)},p=[],m=(a("c5f6"),{name:"ElTreeSelect",props:{props:{type:Object,default:function(){return{value:"id",label:"title",children:"children"}}},size:{type:String,default:"medium"},data:{type:Array,default:function(){return[]}},value:{type:[Number,String],default:null},clearable:{type:Boolean,default:!0},accordion:{type:Boolean,default:!1}},data:function(){return{valueId:null,valueTitle:"",defaultExpandedKey:[]}},watch:{value:function(){this.valueId=this.value,this.initHandle()}},mounted:function(){this.initHandle()},methods:{initHandle:function(){this.valueId&&(this.valueTitle=this.$refs.selectTree.getNode(this.valueId).data[this.props.label],this.$refs.selectTree.setCurrentKey(this.valueId),this.defaultExpandedKey=[this.valueId]),this.initScroll()},initScroll:function(){this.$nextTick(function(){var e=document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],t=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");e.style.cssText="margin: 0px; max-height: none; overflow: hidden;",t.forEach(function(e){e.style.width=0})})},handleNodeClick:function(e){this.valueTitle=e[this.props.label],this.valueId=e[this.props.value],this.$emit("change",this.valueId,e),this.defaultExpandedKey=[]},clearHandle:function(){this.valueTitle="",this.valueId=null,this.defaultExpandedKey=[],this.clearSelected(),this.$emit("change",null)},clearSelected:function(){var e=document.querySelectorAll("#tree-option .el-tree-node");e.forEach(function(e){return e.classList.remove("is-current")})},blur:function(){this.$refs["refSelect"].blur()}}}),b=m,v=(a("8ed5"),a("2877")),g=Object(v["a"])(b,f,p,!1,null,"341f77a3",null),w=g.exports,y={name:"WinProductListAddRelation",components:{searchBar:n["a"],elTreeSelect:w},props:{multiple:{type:Object,default:function(){return!1}},huddleDisabled:{type:Boolean,default:function(){return!1}},clubDisabled:{type:Boolean,default:function(){return!1}}},data:function(){return{edit:!1,loading:!1,searchData:{quickList:[{label:"按商品编号",value:"productCode"},{label:"按商品名称",value:"commodityName"},{label:"按生产厂家",value:"manufacture"}],searchList:[],page:{size:50,current:1}},searchParams:{isReady:1,status:2,huddle:1,club:1},defaultProps:{children:"childrenList",label:"className",value:"sid"},huddleData:[{label:"抱团",value:1},{label:"尚划算",value:0}],clubData:[{label:"乐赛仙",value:1},{label:"佐安堂",value:2},{label:"初心",value:3}],classId:"",tableData:[],tableLoading:!1,page:{total:0},selection:[],show:!1}},created:function(){},methods:{open:function(e,t){var a=this;if(this.edit=!0,this.loading=!1,this.callback=e,this.show=!0,t)for(var r in t)this.searchParams[r]=t[r];this.$nextTick(function(){a.fetchProductClass(),a.$refs["table"].doLayout(),a.$refs["refSearch"].search()})},choseItem:function(e){this.callback(e),this.show=!1},close:function(){this.show=!1},query:function(e){var t=this;this.tableLoading=!0,Object(c["c"])(Object.assign({},e,this.searchParams)).then(function(e){t.tableData=e.data.data.records||[],t.page.total=e.data.data.total,t.tableLoading=!1})},fetchProductClass:function(){var e=this;this.searchParams.secondClassSid="",this.searchParams.firstClassSid="",h({parentSid:0,club:this.searchParams.club}).then(function(t){var a=t.data.data;a.records&&a.records.forEach(function(e){e.childrenList&&e.childrenList.forEach(function(e){delete e.childrenList})}),e.treeData=a.records||[]})},sizeChange:function(e){this.$refs["refSearch"].search({size:e})},pageChange:function(e){this.$refs["refSearch"].search({current:e})},handleSelect:function(e){this.selection=e},changeHuddle:function(e){var t=this;this.searchParams.club=1===e?1:"",this.$refs["refTreeSelect"].clearHandle(),this.$nextTick(function(){t.fetchProductClass(),t.$refs["refSearch"].search()})},changeClub:function(e){var t=this;this.$refs["refTreeSelect"].clearHandle(),this.$nextTick(function(){t.fetchProductClass(),t.$refs["refSearch"].search()})},changeClass:function(e,t){t&&(0===t.parentSid?(this.searchParams.secondClassSid="",this.searchParams.firstClassSid=e):(this.searchParams.firstClassSid="",this.searchParams.secondClassSid=e)),this.$refs["refTreeSelect"].blur(),this.$refs["refSearch"].search()},batchAdd:function(){this.callback(this.selection),this.show=!1}}},_=y,k=(a("e4e4"),Object(v["a"])(_,o,i,!1,null,null,null)),$=k.exports,x={name:"WinMemberListProduct",components:{searchBar:n["a"],selectProduct:$},data:function(){return{edit:!1,loading:!1,searchData:{quickList:[{label:"按商品编号",value:"productCode"},{label:"按商品名称",value:"commodityName"},{label:"按生产厂家",value:"manufacturer"}],searchList:[{prop:"club",placeholder:"所属俱乐部",type:"select",defaultValue:"",list:[{label:"乐赛仙",value:1},{label:"佐安堂",value:2},{label:"初心",value:3}]}],page:{size:20,current:1}},searchParams:{userInfoSid:"",controlType:2},tableData:[],tableLoading:!1,page:{total:0},currentProduct:{},fetchProductLoading:!1,show:!1}},watch:{},created:function(){},methods:{open:function(e,t){var a=this;this.edit=!0,this.loading=!1,this.callback=t,this.searchParams.userInfoSid=e.sid,this.searchData.searchList[0].list=[],e.clubs.forEach(function(e){a.searchData.searchList[0].list.push({label:1===e?"乐赛仙":2===e?"佐安堂":"初心",value:e})}),this.searchData.searchList[0].defaultValue=e.clubs[0],this.show=!0,this.$nextTick(function(){a.$refs["refSearch"].search()})},choseItem:function(e){this.callback(e),this.show=!1},close:function(){this.show=!1},search:function(){this.$refs["refSearch"].search()},query:function(e){var t=this;this.tableLoading=!0,this.tableData=[],e=Object.assign({},e,this.searchParams),Object(l["d"])(e).then(function(e){t.tableData=e.data.data.records||[],t.page.total=e.data.data.total,t.tableLoading=!1})},sizeChange:function(e){this.$refs["refSearch"].search({size:e})},pageChange:function(e){this.$refs["refSearch"].search({current:e})},addProduct:function(){var e=this,t=this.$refs["refSearch"].getParams();this.$refs["refProduct"].open(function(t){var a=[];t.forEach(function(t){a.push({productSid:t.sid,club:e.$refs["refSearch"].searchParams.club,controlType:e.searchParams.controlType,userInfoSid:e.searchParams.userInfoSid})}),e.addAction(a)},{club:t.club})},addAction:function(e){var t=this;Object(l["a"])({userInfoSid:this.searchParams.userInfoSid,list:e}).then(function(e){t.$refs["refSearch"].search()})},updateProductStatus:function(e,t){var a=this,r=0===t?"不可销":1===t?"只可销":"可销";this.$confirm('是否确认将商品"'+e.commodityName+'"状态改为"'+r+'"吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return Object(l["f"])({sid:e.sid,productSid:e.productSid,club:a.$refs["refSearch"].searchParams.club,controlType:t,userInfoSid:a.searchParams.userInfoSid})}).then(function(){a.$refs["refSearch"].search(),a.$message({showClose:!0,message:"修改成功",type:"success"})}).catch(function(){})},removeProduct:function(e){var t=this;this.$confirm('是否确认将"'+e.commodityName+'"从控销列表移除?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return Object(l["c"])({sid:e.sid})}).then(function(){t.$refs["refSearch"].search(),t.$message({showClose:!0,message:"移除成功",type:"success"})}).catch(function(){})}}},P=x,S=(a("b2ea"),Object(v["a"])(P,r,s,!1,null,null,null));t["a"]=S.exports},da71:function(e,t,a){"use strict";a.d(t,"e",function(){return l}),a.d(t,"b",function(){return n}),a.d(t,"d",function(){return o}),a.d(t,"g",function(){return i}),a.d(t,"i",function(){return c}),a.d(t,"a",function(){return u}),a.d(t,"f",function(){return d}),a.d(t,"c",function(){return h}),a.d(t,"h",function(){return f});var r=a("b775"),s=a("700d");function l(e){return Object(r["a"])({baseURL:s["a"],url:"/k3/customer/list",method:"get",params:e})}function n(e){return Object(r["a"])({baseURL:s["a"],url:"/member/admin/userInfo/bindUser/".concat(e.sid),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"put",params:e})}function o(e){return Object(r["a"])({baseURL:s["a"],url:"/member/admin/spuControl/page/".concat(e.userInfoSid),method:"get",params:e})}function i(e){return Object(r["a"])({baseURL:s["a"],headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"/member/admin/userInfo/reSetPwd/".concat(e.sid),method:"put",params:e})}function c(e){return Object(r["a"])({baseURL:s["a"],url:"/member/admin/userInfo/openStatus/".concat(e.userSid),method:"put",params:e})}function u(e){return Object(r["a"])({baseURL:s["a"],url:"/member/admin/spuControl/".concat(e.userInfoSid),method:"post",data:e.list})}function d(e){return Object(r["a"])({baseURL:s["a"],url:"/member/admin/spuControl/".concat(e.userInfoSid),method:"put",data:e})}function h(e){return Object(r["a"])({baseURL:s["a"],url:"/member/admin/spuControl/".concat(e.sid),method:"delete"})}function f(e){return Object(r["a"])({baseURL:s["a"],url:"/member/admin/userInfo/setBillType/".concat(e.sid,"/").concat(e.billType),method:"PUT",data:e})}},e4e4:function(e,t,a){"use strict";var r=a("1288"),s=a.n(r);s.a},f8fc:function(e,t,a){"use strict";var r=a("692f"),s=a.n(r);s.a},faa9:function(e,t,a){"use strict";var r=a("8d2c"),s=a.n(r);s.a}}]);