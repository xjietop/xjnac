(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a4605f6"],{"078a":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"el-win-product-list-set-price",attrs:{title:"修改价格",visible:t.show,"close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}],ref:"ruleForm",attrs:{model:t.form,rules:t.rules,size:"medium","label-width":"80px"}},[a("el-form-item",{attrs:{prop:"price",label:"抱团价"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入抱团价",maxlength:10},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"retailPrice",label:"零售价"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入零售价"},model:{value:t.form.retailPrice,callback:function(e){t.$set(t.form,"retailPrice",e)},expression:"form.retailPrice"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.save}},[t._v("提交审核")])],1)],1)},n=[],i=(a("28a5"),a("ac6a"),a("feb7")),o=a("0b60"),c={name:"WinProductListSetPrice",data:function(){return{edit:!1,loading:!1,formLoading:!1,form:{sid:"",price:"",retailPrice:"",skuList:[]},tableColumn:[],product:{},rules:{price:[{required:!0,message:"请输入抱团价",trigger:"blur"},{pattern:o["a"].money,message:"价格最多保留两位小数",trigger:"blur"}],retailPrice:[{required:!0,message:"请输入零售价",trigger:"blur"},{pattern:o["a"].money,message:"价格最多保留两位小数",trigger:"blur"}]},show:!1}},methods:{update:function(t,e){var a=this;this.edit=!0,this.loading=!1,this.callback=e,this.show=!0,this.product=Object.assign({},t),this.form.sid=t.sid,this.form.skuList=[],this.tableColumn=[],this.$nextTick(function(){a.$refs["ruleForm"].resetFields(),1!==a.product.drugs&&a.queryProductSkuList(),a.form.price=t.price,a.form.retailPrice=t.retailPrice})},save:function(){var t=this;this.$refs["ruleForm"].validate(function(e){if(!e)return!1;t.loading=!0;var a=Object.assign({},t.form);t.callback(a)})},close:function(){this.show=!1},queryProductSkuList:function(t){var e=this;this.formLoading=!0,Object(i["g"])(Object.assign({sid:this.product.sid})).then(function(t){var a=t.data.data;a.length>0?a.forEach(function(t,a){if(t.attrValueJson){var r=JSON.parse(t.attrValueJson),n={};for(var i in r)n[i.split("###")[1]]=r[i].split("###")[1],0===a&&e.tableColumn.push(i.split("###")[1]);e.form.skuList.push({sid:t.sid,price:t.price,retailPrice:t.retailPrice,attrValue:n})}}):e.product.drugs=1,e.$nextTick(function(){e.formLoading=!1})})}}},u=c,s=(a("fb04"),a("2877")),d=Object(s["a"])(u,r,n,!1,null,null,null);e["a"]=d.exports},"0b60":function(t,e,a){"use strict";e["a"]={IDcard:/^\d{6}(19|2\d)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)?$/,cell_phone:/^(1[3-9][0-9])\d{8}$|\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,mobile:/^((13|14|15|17|18)[0-9]{1}\d{8})$/,chinese:/^[\u0391-\uFFE5]+$/,date:/^\d{4}-\d{2}-\d{2}$/,digits:/^\d+$/,email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,letters:/^[a-z]+$/i,person_name:/^(?!\d+$)[\dA-Za-z\u2E80-\uFE4F]{1,20}$/,qq:/^[1-9]\d{4,}$/,tel:/^(?:(?:0\d{2,3}[\- ]?[1-9]\d{6,7})|(?:[48]00[\- ]?[1-9]\d{6}))$/,time:/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/,url:/^(https?|s?ftp):\/\/\S+$/i,zipcode:/^\d{6}$/,telPhone:/^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$|^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$|^0\d{2,3}-?\d{7,8}$/,longitude:/^[\-\+]?(((\d|[1-9]\d|1[0-7]\d|0)\.\d{0,10})|(\d|[1-9]\d|1[0-7]\d|0{1,3})|180\.0{0,10}|180)$/,latitude:/^[\-\+]?([0-8]?\d{1}\.\d{0,10}|90\.0{0,10}|[0-8]?\d{1}|90)$/,zmszhz:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,price:/^[0-9]+([.]{1}[0-9]{1,2})?$/,priceDecimal:/^[0-9]+([.]{1}[0-9]{1,4})?$/,money:/^\d+(\.\d{1,2})?$/,money2:/^[\-\+]?\d+(\.\d{1,2})?$/,money3:/^\d{1,10}(\.\d{1,2})?$/,discount:/^(\d|[1-9]\d|100)(\.\d{1,2})?$/,passWord:/^[a-zA-Z0-9\x21-\x7e]{6,20}$/}},"15e2":function(t,e,a){"use strict";var r=a("ae54"),n=a.n(r);n.a},"24b5":function(t,e,a){},"386d":function(t,e,a){"use strict";var r=a("cb7c"),n=a("83a1"),i=a("5f1b");a("214f")("search",1,function(t,e,a,o){return[function(a){var r=t(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,r):new RegExp(a)[e](String(r))},function(t){var e=o(a,t,this);if(e.done)return e.value;var c=r(t),u=String(this),s=c.lastIndex;n(s,0)||(c.lastIndex=0);var d=i(c,u);return n(c.lastIndex,s)||(c.lastIndex=s),null===d?-1:d.index}]})},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},8479:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container app-product-list"},[a("search-bar",{ref:"refSearch",attrs:{"search-data":t.searchData,"auto-load":!0},on:{search:t.query}}),t._v(" "),a("div",{staticClass:"app-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData,height:t.height,"tooltip-effect":"light",stripe:""}},[a("el-table-column",{attrs:{prop:"productCode",label:"商品ID","min-width":"120",align:"left",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"commodityName",label:"商品通用名","min-width":"150",align:"left",fixed:"","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"supplier",label:"供应商","min-width":"120",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"manufacturer",label:"生产厂家","min-width":"120",align:"left","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"approvalNumber",label:"批准文号","min-width":"120",align:"left","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.update(e.row)}}},[t._v("完善商品")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.editPrice(e.row)}}},[t._v("设置价格")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"app-pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","prev-text":"上一页","next-text":"下一页","page-sizes":[20,50,100,200],"current-page":t.searchData.page.current,"page-size":t.searchData.page.size,total:t.page.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),a("win-set-price",{ref:"refPrice"})],1)},n=[],i=(a("386d"),a("db72")),o=a("feb7"),c=a("2f62"),u=a("b932"),s=a("078a"),d={name:"PageProductNew",components:{searchBar:u["a"],WinSetPrice:s["a"]},data:function(){return{searchData:{quickList:[{label:"按商品编号",value:"productCode"},{label:"按商品名称",value:"commodityName"},{label:"按生产厂家",value:"manufacture"}],searchList:[{prop:"club",placeholder:"所属俱乐部",type:"select",clearable:!0,list:[{label:"乐赛仙",value:1},{label:"佐安堂",value:2},{label:"初心",value:3}]}],page:{size:20,current:1}},searchParams:{isReady:0},tableData:[],page:{pageSize:20}}},computed:Object(i["a"])({},Object(c["b"])(["permissions"]),{height:function(){return this.$store.getters.winHeight-205}}),methods:{query:function(t){var e=this;this.tableLoading=!0,Object(o["c"])(Object.assign({},t,this.searchParams)).then(function(t){e.tableData=t.data.data.records,e.page.total=t.data.data.total,e.tableLoading=!1})},sizeChange:function(t){this.$refs["refSearch"].search({size:t})},pageChange:function(t){this.$refs["refSearch"].search({current:t})},update:function(t){this.$router.push({path:"/product/form",query:{id:t.sid}})},editPrice:function(t){var e=this;this.$refs["refPrice"].update(t,function(t){Object(o["m"])(t).then(function(){e.query(),e.$refs["refPrice"].loading=!1,e.$refs["refPrice"].close(),e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3})}).catch(function(){e.$refs["refPrice"].loading=!1})})}}},l=d,p=(a("15e2"),a("2877")),f=Object(p["a"])(l,r,n,!1,null,"73f2df6e",null);e["default"]=f.exports},ae54:function(t,e,a){},fb04:function(t,e,a){"use strict";var r=a("24b5"),n=a.n(r);n.a},feb7:function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"i",function(){return o}),a.d(e,"f",function(){return c}),a.d(e,"n",function(){return u}),a.d(e,"b",function(){return s}),a.d(e,"d",function(){return d}),a.d(e,"k",function(){return l}),a.d(e,"p",function(){return p}),a.d(e,"o",function(){return f}),a.d(e,"m",function(){return m}),a.d(e,"l",function(){return h}),a.d(e,"q",function(){return b}),a.d(e,"g",function(){return g}),a.d(e,"e",function(){return v}),a.d(e,"h",function(){return w}),a.d(e,"r",function(){return $}),a.d(e,"j",function(){return L}),a.d(e,"a",function(){return j});var r=a("b775"),n=a("700d");function i(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/page",method:"get",params:t})}function o(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/relation/list/".concat(t.productSid),method:"get",params:t})}function c(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/relation/productList/page",method:"get",params:t})}function u(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/relation",method:"put",data:t})}function s(t){return Object(r["a"])({baseURL:n["a"],url:"/admin/external/area/treeInfo",method:"get",params:t})}function d(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/area/".concat(t.sid),method:"get",params:t})}function l(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/".concat(t.sid,"/area"),method:"put",data:t.area})}function p(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/saleStatus",method:"put",data:t})}function f(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/risePrice/".concat(t.sid),method:"put",data:t.prices})}function m(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/price/audit",method:"POST",data:t})}function h(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/showIndex/".concat(t.sid),method:"put",data:t.index})}function b(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/label/relation",method:"post",data:t})}function g(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/sku/list/".concat(t.sid),method:"get",params:t})}function v(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/info/".concat(t.sid),method:"get",params:t})}function w(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/label/page",method:"get",params:t})}function $(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/headSales",method:"post",data:t})}function L(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/inspectionReport/batchUpload/".concat(t.sid),method:"post",data:t.report})}function j(t){return Object(r["a"])({baseURL:n["a"],url:"/product/admin/product/createIndexBySid/".concat(t.sid),method:"get",params:t})}}}]);