(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dbf342d"],{"2d34":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container app-bi-order-list"},[a("search-bar",{ref:"refSearch",attrs:{"search-data":t.searchData,"auto-load":!0},on:{search:t.query}},[a("template",{slot:"left"},[a("div",{staticClass:"search-item dib"},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange",size:"small",placeholder:"选择时间",clearable:!1,"picker-options":t.pickerOptions},on:{change:t.search},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1)]),t._v(" "),a("template",{slot:"right"},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.changeDateType},model:{value:t.searchParams.dateType,callback:function(e){t.$set(t.searchParams,"dateType",e)},expression:"searchParams.dateType"}},[a("el-radio-button",{attrs:{label:1}},[t._v("当日")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[t._v("本月")]),t._v(" "),a("el-radio-button",{attrs:{label:3}},[t._v("本年")])],1)],1)],2),t._v(" "),a("div",{staticClass:"app-table"},[a("div",{staticClass:"count-box"},[a("ul",[a("li",[a("i",{staticClass:"count-icon c-1"},[a("svg-icon",{attrs:{"icon-class":"product"}})],1),t._v(" "),a("div",{staticClass:"h2",domProps:{textContent:t._s(t.totalData.orderNumber||0)}}),t._v(" "),a("p",[t._v("订单数量")])]),t._v(" "),a("li",[a("i",{staticClass:"count-icon c-2"},[a("svg-icon",{attrs:{"icon-class":"sales-volume"}})],1),t._v(" "),a("div",{staticClass:"h2",domProps:{textContent:t._s(t.totalData.totalAmount||0)}}),t._v(" "),a("p",[t._v("销量(元)")])]),t._v(" "),a("li",[a("i",{staticClass:"count-icon c-3"},[a("svg-icon",{attrs:{"icon-class":"adjust-accounts"}})],1),t._v(" "),a("div",{staticClass:"h2",domProps:{textContent:t._s(t.totalData.accountsAmount||0)}}),t._v(" "),a("p",[t._v("核算后销量(元)")])])])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData,height:t.height,stripe:""}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单编号",width:"180",align:"center",fixed:"","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link",on:{click:function(a){return t.detail(e.row)}}},[t._v(t._s(e.row.orderId))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"businessName",label:"客户名称","min-width":"200",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"userCode",label:"客户编号","min-width":"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalAmount",label:"销量(元)","min-width":"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"accountsAmount",label:"核算后销量(元)","min-width":"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productNumber",label:"商品数量","min-width":"100",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"100",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderStatusDesc",label:"订单状态","min-width":"100",align:"center","show-overflow-tooltip":""}}),t._v(" "),t.isProvinceOrArea?a("el-table-column",{attrs:{prop:"userName",label:"团队成员","min-width":"100",align:"center","show-overflow-tooltip":""}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"orderType",label:"查看物流","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",disabled:"已发货"!==e.row.orderStatusDesc},on:{click:function(a){return t.logistics(e.row)}}},[t._v("查看物流")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"app-pagination"},[a("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","prev-text":"上一页","next-text":"下一页","page-sizes":[20,50,100,200],"current-page":t.searchData.page.current,"page-size":t.searchData.page.size,total:t.page.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),a("win-logistics",{ref:"refLogistics"})],1)},n=[],s=(a("386d"),a("db72")),r=a("b775"),o=a("700d");function l(t){return Object(r["a"])({baseURL:o["a"],url:"/bi/api/statistics/order/page",method:"post",data:t})}function c(t){return Object(r["a"])({baseURL:o["a"],url:"/order/api/order/logistics/".concat(t.orderId),method:"get",params:t})}var u=a("5880"),d=a("b932"),p=a("c1df"),h=a.n(p),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"el-win-bi-order-logistics",attrs:{title:"查看物流",visible:t.show,"close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e}}},[t.logisticInfoList.length<=0?[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"no-data"},[a("i",{staticClass:"el-icon-warning"}),t._v(" "),a("p",[t._v("暂无物流信息")])])]:t._e(),t._v(" "),t.logisticInfoList.length>0&&!t.loading?t._l(t.logisticInfoList,function(e){return a("div",{key:e.shippingCode},[a("div",{staticClass:"logistics-info"},[t._v(t._s(e.shippingCompany)+"  "+t._s(e.shippingCode))]),t._v(" "),a("el-timeline",{attrs:{reverse:!0}},t._l(e.orderTrackList,function(e,i){return a("el-timeline-item",{key:i,attrs:{timestamp:e.shippingUpdateTime}},[t._v("\n                    "+t._s(e.detail)+"\n                ")])}),1)],1)}):t._e()],2)},f=[],g={name:"WinBiOrderLogistics",data:function(){return{loading:!1,logisticInfoList:[],show:!1}},methods:{open:function(t,e){var a=this;this.loading=!1,this.callback=e,this.show=!0,this.$nextTick(function(){a.queryLogistics(t)})},queryLogistics:function(t){var e=this;this.loading=!0,c({orderId:t.orderId}).then(function(t){var a=t.data.data;e.loading=!1,e.logisticInfoList=a.logisticInfoList||[]}).catch(function(){e.loading=!1})},close:function(){this.show=!1}}},m=g,b=(a("498e"),a("2877")),_=Object(b["a"])(m,v,f,!1,null,null,null),w=_.exports,k={name:"PageBiOrderList",components:{searchBar:d["a"],WinLogistics:w},data:function(){return{ossURL:this.$store.getters.oss_url+"/",searchData:{quickList:[{label:"订单编号",value:"orderId"},{label:"团队成员",value:"userName"},{label:"客户名称",value:"businessName"}],searchList:[{prop:"orderStatus",placeholder:"订单状态",type:"select",clearable:!0,list:[{label:"待支付",value:"1"},{label:"待发货",value:"2"},{label:"已发货",value:"3"},{label:"已收货",value:"4"},{label:"已完成",value:"5"},{label:"已取消",value:"6"},{label:"退款中",value:"7"},{label:"已删除",value:"8"}]}],page:{size:20,current:1}},searchParams:{dateType:2},dateTime:[h()().startOf("month"),h()().endOf("month")],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},tableData:[],totalData:{},tableLoading:!1,page:{total:0}}},computed:Object(s["a"])({},Object(u["mapGetters"])(["permissions"]),{height:function(){return this.$store.getters.winHeight-315},isProvinceOrArea:function(){return 1===this.$store.getters.userInfo.isProvince||1===this.$store.getters.userInfo.isRegion}}),mounted:function(){this.isProvinceOrArea||this.searchData.quickList.splice(1,1)},methods:{query:function(t){var e=this;this.tableLoading=!0,l(Object.assign({},t,this.searchParams,{startTime:h()(this.dateTime[0]).format("YYYY-MM-DD"),endTime:h()(this.dateTime[1]).format("YYYY-MM-DD")})).then(function(t){var a=t.data.data;e.tableData=a.page.records||[],e.totalData=a.total||{},e.page.total=a.page.total,e.tableLoading=!1})},changeDateType:function(t){var e=this;1===t?this.dateTime=[h()(),h()()]:2===t?this.dateTime=[h()().startOf("month"),h()().endOf("month")]:3===t&&(this.dateTime=[h()().startOf("year"),h()().endOf("year")]),this.$nextTick(function(){e.$refs["refSearch"].search()})},search:function(){this.$refs["refSearch"].search()},sizeChange:function(t){this.$refs["refSearch"].search({size:t})},pageChange:function(t){this.$refs["refSearch"].search({current:t})},logistics:function(t){this.$refs["refLogistics"].open(t,function(t){})},detail:function(t){this.$router.push({path:"/bi/order/detail",query:{id:t.orderId}})}}},C=k,x=(a("f466"),Object(b["a"])(C,i,n,!1,null,"b1b492b8",null));e["default"]=x.exports},"386d":function(t,e,a){"use strict";var i=a("cb7c"),n=a("83a1"),s=a("5f1b");a("214f")("search",1,function(t,e,a,r){return[function(a){var i=t(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,i):new RegExp(a)[e](String(i))},function(t){var e=r(a,t,this);if(e.done)return e.value;var o=i(t),l=String(this),c=o.lastIndex;n(c,0)||(o.lastIndex=0);var u=s(o,l);return n(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]})},"498e":function(t,e,a){"use strict";var i=a("f451"),n=a.n(i);n.a},"74f0":function(t,e,a){var i={"./en-gb":"39a6","./zh-cn":"5c3a"};function n(t){var e=s(t);return a(e)}function s(t){var e=i[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}n.keys=function(){return Object.keys(i)},n.resolve=s,t.exports=n,n.id="74f0"},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},c683:function(t,e,a){},f451:function(t,e,a){},f466:function(t,e,a){"use strict";var i=a("c683"),n=a.n(i);n.a}}]);